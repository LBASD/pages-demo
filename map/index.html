
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>www.makeApie.cn - EChartsæ¡ˆä¾‹ä¸‹è½½ - ä¼šå‘˜åˆ†å¸ƒå›¾</title>
    <!--
        ğŸš¨ğŸš¨éå¸¸é‡è¦ğŸš¨ğŸš¨ï¼šè®¾ç½®ç›¸å¯¹è·¯å¾„èµ„æºurlé“¾æ¥
        å¦‚æœä½ éœ€è¦æœ¬åœ°ä½¿ç”¨ï¼Œè¯·ä¸‹è½½ä¸‹æ¥ï¼Œå‡è®¾ä¸‹é¢ä»£ç ä¸­æœ‰ä¸ªç›¸å¯¹è·¯å¾„èµ„æº /dep/echarts/map/js/china.jsï¼ŒğŸ‘‰ğŸ‘‰ä¸‹è½½æ–¹æ³•ï¼šhttps://www.makeapie.cn/dep/echarts/map/js/china.js
    -->
    <!-- <base href="https://www.makeapie.cn/" /> -->

    <!-- å¼•å…¥åˆšåˆšä¸‹è½½çš„ ECharts æ–‡ä»¶ å’Œ jquery -->
    <script
      type="text/javascript"
      src="https://registry.npmmirror.com/jquery/3.7.1/files/dist/jquery.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://registry.npmmirror.com/echarts/5.5.1/files/dist/echarts.min.js"
    ></script>
    <script src="./js/viewer.js"></script>

    <link rel="stylesheet" href="./css/viewer.css" />
    <style>
      * {
        padding: 0;
        margin: 0;
      }
    </style>

    <script type="text/javascript" src="./china.js"></script>
  </head>
  <body>
    <!-- ä¸º ECharts å‡†å¤‡ä¸€ä¸ªå®šä¹‰äº†å®½é«˜çš„ DOM -->
    <div
      id="chart-panel"
      style="
        width: calc(100vw - 200px);
        height: calc(100vh - 200px);
        padding: 100px;
        margin: 0 auto;
      "
    ></div>

    <ul id="images" style="display: none">
      <li><img src="./images/tibet-1.jpg" alt="Picture 1" /></li>
      <li><img src="./images/1.jpg" alt="Picture 1" /></li>
      <li><img src="./images/1.png" alt="Picture 1" /></li>
      <li><img src="./images/2.jpg" alt="Picture 1" /></li>
    </ul>
    <script type="text/javascript">
      // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹
      var myChart = echarts.init(document.getElementById("chart-panel"));
      // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®
      var option = {};

      //=============== start ===============//
      /**
       * ğŸš¨ğŸš¨éå¸¸é‡è¦ğŸš¨ğŸš¨
       * ä¸‹é¢æ˜¯ ç½‘ç«™å·¦ä¾§ä»£ç ï¼Œæ ¸å¿ƒä»£ç 
       */
      const data = [
        { name: "é’æµ·", value: 3 },
        { name: "é™•è¥¿", value: 9 },
        { name: "ç”˜è‚ƒ", value: 1 },
        { name: "æ¹–åŒ—", value: 4 },
        { name: "æ²³å—", value: 1 },
        { name: "æ–°ç–†", value: 4 },
        { name: "å±±è¥¿", value: 2 },
        { name: "å®å¤", value: 14 },
        { name: "å‰æ—", value: 1 },
        { name: "å†…è’™å¤", value: 1 },
      ];

      var geoCoordMap = {
        é™•è¥¿: [108.948024, 34.263161],
        é’æµ·: [96.778916, 35.623178],
        ç”˜è‚ƒ: [103.823557, 36.058039],
        æ¹–åŒ—: [113.298572, 30.684355],
        æ²³å—: [113.665412, 33.757975],
        æ–°ç–†: [85.617733, 40.792818],
        å±±è¥¿: [111.849248, 36.857014],
        å®å¤: [106.278179, 37.26637],
        å‰æ—: [125.3245, 43.886841],
        å†…è’™å¤: [111.670801, 41.818311],
      };

      function convertData(data) {
        var res = [];
        for (var i = 0; i < data.length; i++) {
          var geoCoord = geoCoordMap[data[i].name];
          if (geoCoord) {
            res.push({
              name: data[i].name,
              value: geoCoord.concat(data[i].value),
            });
          }
        }
        return res;
      }

      option = {
        title: {
          text: "å›ºæœ¬ç„¶å…¨å›½äº§ä¸šå¸ƒå±€å›¾",
          left: "center",
        },
        tooltip: {
          trigger: "item",
          // showDelay: 0,
          // transitionDuration: 0.2,
        },
        visualMap: {
          left: "right",
          min: 1,
          max: 15,
          inRange: {
            color: [
            //   "#313695",
            //   "#4575b4",
            //   "#74add1",
              "#abd9e9",
              "#e0f3f8",
              "#ffffbf",
              "#fee090",
              "#fdae61",
              "#f46d43",
            //   "#d73027",
            //   "#a50026",
            ],
          },
          text: ["High", "Low"],
          calculable: true,
          realtime: false,
        },
        geo: {
          name: "å›¾ç‰‡æ•°é‡",
          map: "china",
          roam: false,
          // scaleLimit:{
          //   max:'1.2',
          //   min:'0.7'
          // },
          label: {
            normal: {
              show: true,
              textStyle: {
                color: "rgba(0,0,0,0.6)",
              },
            },
          },
          itemStyle: {
            normal: {
              borderColor: "rgba(0, 0, 0, 0.2)",
            },
            emphasis: {
              areaColor: null,
              shadowOffsetX: 0,
              shadowOffsetY: 0,
              shadowBlur: 20,
              borderWidth: 0,
              shadowColor: "rgba(0, 0, 0, 0.5)",
            },
          },
        },
        // backgroundColor: 'rgba(0,51,102, 1)',
        series: [
          {
            type: "scatter",
            coordinateSystem: "geo",
            data: convertData(data),
            symbolSize: 20,
            symbol: `image://./flag.png`,

            // symbol:
            //   "path://M35.025,17.608c-5.209-4.786-11.483-2.301-15.303-4.281v-1.482c0-0.41-0.333-0.743-0.743-0.743c-0.411,0-0.743,0.333-0.743,0.743v24.682c-1.855,0.104-3.261,0.59-3.261,1.175c0,0.661,1.793,1.197,4.005,1.197c2.21,0,4.003-0.536,4.003-1.197c0-0.585-1.405-1.071-3.261-1.175V26.151C24.575,24.573,28.408,17.166,35.025,17.608z",
            symbolRotate: 0,
            symbolOffset: ["50%", "-100%"],
            label: {
              normal: {
                formatter: "{b}",
                position: "top",
                show: false,
                textStyle: {
                  color: "#000000",
                  fontSize: 16,
                },
              },
              emphasis: {
                show: false,
              },
            },
            itemStyle: {
              normal: {
                color: "#F06C00",
              },
            },
          },
          {
            name: "ä¸ªäººä¼šå‘˜æ•°é‡",
            type: "map",
            geoIndex: 0,
            tooltip: {
              show: true,
            },
            data: data,
          },
        ],
      };
      //=============== end ===============//

      // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚
      if (option && typeof option === "object") {
        myChart.setOption(option);
      }
      window.addEventListener("resize", myChart.resize);
      // ç›‘å¬åœ°å›¾ç‚¹å‡»äº‹ä»¶
      myChart.on("click", function (params) {
        if (params.componentType === "series" && params.seriesType === "map") {
          // alert("ä½ ç‚¹å‡»äº†ï¼š" + params.name);
          console.log("ä½ ç‚¹å‡»äº†ï¼š" + params.name + "å›¾ç‰‡æ•°é‡:" + params.value);
          if (params.value > 0) {
            // ä½ å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ›´å¤šé€»è¾‘ï¼Œæ¯”å¦‚å¯¼èˆªåˆ°è¯¦æƒ…é¡µ}
            previewImg();
          }
        }
      });

      function previewImg() {
        var viewer = new Viewer(document.getElementById("images"), {
          button: false, // å³ä¸Šè§’å…³é—­æŒ‰é’®
          title: false, // æ ‡é¢˜
          toolbar: {
            oneToOne: true,
            oneToOne: "large",
            prev: "large",
            // prev: function () {
            //   viewer.prev(true);
            // },
            // play: true,
            next: "large",
            // next: function () {
            //   viewer.next(true);
            // },
          },

          hidden: function () {
            viewer.destroy();
          },
        });
        viewer.show();
      }
    </script>
  </body>
</html>
